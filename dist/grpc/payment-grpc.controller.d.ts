import { Observable } from 'rxjs';
import { SubscriptionService } from '../services/subscription.service';
import { StripeService } from '../services/stripe.service';
import { PrismaService } from '../prisma/prisma.service';
import { type CreateSubscriptionRequest, type CreateSubscriptionResponse, type UpdateSubscriptionRequest, type UpdateSubscriptionResponse, type CancelSubscriptionRequest, type CancelSubscriptionResponse, type GetSubscriptionRequest, type GetSubscriptionResponse, type GetUserSubscriptionsRequest, type GetUserSubscriptionsResponse, type ProcessPaymentRequest, type ProcessPaymentResponse, type RefundPaymentRequest, type RefundPaymentResponse, type GetPaymentHistoryRequest, type GetPaymentHistoryResponse, type AddPaymentMethodRequest, type AddPaymentMethodResponse, type RemovePaymentMethodRequest, type RemovePaymentMethodResponse, type GetPaymentMethodsRequest, type GetPaymentMethodsResponse, type SetDefaultPaymentMethodRequest, type SetDefaultPaymentMethodResponse, type GetInvoicesRequest, type GetInvoicesResponse, type GetUpcomingInvoiceRequest, type GetUpcomingInvoiceResponse, type GetPricingPlansRequest, type GetPricingPlansResponse, type ValidatePromoCodeRequest, type ValidatePromoCodeResponse, type ProcessStripeWebhookRequest, type ProcessStripeWebhookResponse, type GetPaymentHealthRequest, type GetPaymentHealthResponse, type StreamPaymentEventsRequest, type StreamPaymentEventsResponse } from '@btd/proto/types/payment';
export declare class PaymentGrpcController {
    private readonly subscriptionService;
    private readonly stripeService;
    private readonly prisma;
    private readonly logger;
    private readonly eventStream;
    private streamCounter;
    constructor(subscriptionService: SubscriptionService, stripeService: StripeService, prisma: PrismaService);
    createSubscription(data: CreateSubscriptionRequest): Promise<CreateSubscriptionResponse>;
    updateSubscription(data: UpdateSubscriptionRequest): Promise<UpdateSubscriptionResponse>;
    cancelSubscription(data: CancelSubscriptionRequest): Promise<CancelSubscriptionResponse>;
    getSubscription(data: GetSubscriptionRequest): Promise<GetSubscriptionResponse>;
    processPayment(data: ProcessPaymentRequest): Promise<ProcessPaymentResponse>;
    addPaymentMethod(data: AddPaymentMethodRequest): Promise<AddPaymentMethodResponse>;
    getPaymentMethods(data: GetPaymentMethodsRequest): Promise<GetPaymentMethodsResponse>;
    getPricingPlans(data: GetPricingPlansRequest): GetPricingPlansResponse;
    getInvoices(data: GetInvoicesRequest): Promise<GetInvoicesResponse>;
    processStripeWebhook(data: ProcessStripeWebhookRequest): Promise<ProcessStripeWebhookResponse>;
    getPaymentHealth(data: GetPaymentHealthRequest): GetPaymentHealthResponse;
    streamPaymentEvents(data: StreamPaymentEventsRequest): Observable<StreamPaymentEventsResponse>;
    private emitPaymentEvent;
    private getFeatureFlagsForPlan;
    private getPlanAmount;
    private extractFeatureFlags;
    private getPlanFeatureList;
    getUserSubscriptions(data: GetUserSubscriptionsRequest): Promise<GetUserSubscriptionsResponse>;
    refundPayment(data: RefundPaymentRequest): RefundPaymentResponse;
    getPaymentHistory(data: GetPaymentHistoryRequest): Promise<GetPaymentHistoryResponse>;
    removePaymentMethod(data: RemovePaymentMethodRequest): Promise<RemovePaymentMethodResponse>;
    setDefaultPaymentMethod(data: SetDefaultPaymentMethodRequest): Promise<SetDefaultPaymentMethodResponse>;
    getUpcomingInvoice(data: GetUpcomingInvoiceRequest): GetUpcomingInvoiceResponse;
    validatePromoCode(data: ValidatePromoCodeRequest): ValidatePromoCodeResponse;
}
